# audit/code-audit-predictions-20251103

**–î–∞—Ç–∞:** 2025-11-03  
**–ó–∞–¥–∞—á–∞:** –ó–∞–ø—É—Å–∫ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –∏ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ (—ç—Ç–∞–ø 0) + —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –±–ª–∏–∂–∞–π—à–∏—Ö –º–∞—Ç—á–µ–π  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** VSCode Agent v1.1

## 1. –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- "Prediction" (–ø–æ–∏—Å–∫ –ø–æ backend/src –∏ prisma/schema.prisma)
- "predictions" (–ø–æ–∏—Å–∫ –ø–æ admin/src –∏ frontend/src)
- "MatchStatus" (–ø—Ä–∏–∑–º–∞)
- "adminStore" (Zustand TTL)

## 2. –ü—Ä–æ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—É—Ç–∏
- backend/src/routes/adminRoutes.ts
- backend/src/services/matchAggregation.ts
- admin/src/store/adminStore.ts
- admin/src/components/tabs/UsersTab.tsx
- prisma/schema.prisma
- shared/types.ts
- docs/cache.md, docs/project.md, docs/plan.md

## 3. –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
- `prisma/schema.prisma` ‚Äî –º–æ–¥–µ–ª—å `Prediction` (userId/matchId, result1x2, totalGoalsOver)
- `backend/src/services/matchAggregation.ts` ‚Äî —Ç–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –æ—á–∫–æ–≤ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π- –Ω–∞—à–µ–ª –Ω–µ —Ç–æ, —ç—Ç–æ –ª–æ–≥–∏–∫–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –æ—á–∫–æ–≤ –∑–∞ –º–∞—Ç—á–∏, –Ω–æ –Ω–µ –∑–∞ –ø—Ä–æ–≥–Ω–æ–∑—ã
- `admin/src/store/adminStore.ts` ‚Äî TTL-–∫—ç—à –¥–ª—è `predictions`
- `admin/src/components/tabs/UsersTab.tsx` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –≤ –∞–¥–º–∏–Ω–∫–µ
- `frontend/src/App.tsx` ‚Äî –≤–∫–ª–∞–¥–∫–∞ `predictions` –ø–æ–∫–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä -—Ç–∞–∫–∂–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–∞–ø–∫–∏ –≤–Ω—É—Ç–∏ –∫–æ–¥–∞, –∞ –Ω–µ –ø–ª–æ–¥–∏—Ç—å –≤—Å–µ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ

## 4. –†–µ—à–µ–Ω–∏–µ
–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ –≤–Ω–µ–¥—Ä—è–µ–º –Ω–æ–≤—É—é –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö: –¥–æ–±–∞–≤–ª—è–µ–º —Ç–∞–±–ª–∏—Ü—ã `PredictionTemplate`, `PredictionEntry`, `PredictionStreak`, `AchievementLevel`, `UserAchievementProgress`, `UserRating`, `RatingSnapshot`, `AdminPointAdjustment`, `AdminActionLog`. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –≥–æ—Ç–æ–≤–∏–º API-–∫–æ–Ω—Ç—É—Ä –¥–ª—è –≤—ã–¥–∞—á–∏ –±–ª–∏–∂–∞–π—à–∏—Ö –º–∞—Ç—á–µ–π (‚â§6 –¥–Ω–µ–π, —Å—Ç–∞—Ç—É—Å `SCHEDULED`) –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è –≤–∫–ª–∞–¥–∫–∏ "–ü—Ä–æ–≥–Ω–æ–∑—ã" —Å –ø–æ–¥–≤–∫–ª–∞–¥–∫–æ–π "–ú–æ–∏ –ø—Ä–æ–≥–Ω–æ–∑—ã".

## 5. –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- [x] –≠—Ç–∞–ø 1: –û–±–Ω–æ–≤–∏—Ç—å Prisma —Å—Ö–µ–º—É, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç
- [x] –≠—Ç–∞–ø 2: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å backend-—ç–Ω–¥–ø–æ–π–Ω—Ç—ã –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö/–º–æ–∏—Ö –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –¥–∞—Ç–µ –∏ —Å—Ç–∞—Ç—É—Å—É
- [x] –≠—Ç–∞–ø 3: –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à-–∫–ª—é—á–∏ –∏ –æ–±–Ω–æ–≤–∏—Ç—å `docs/cache.md`
- [x] –≠—Ç–∞–ø 4: –†–∞—Å—à–∏—Ä–∏—Ç—å frontend –≤–∫–ª–∞–¥–∫—É "–ü—Ä–æ–≥–Ω–æ–∑—ã" (–ø–æ–¥–≤–∫–ª–∞–¥–∫–∏ –ê–∫—Ç–∏–≤–Ω—ã–µ/–ú–æ–∏) *(–∞–¥–º–∏–Ω –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –∑–∞–¥–∞—á—É)*
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ lint/build *(–≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏)*
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ dev (—Ä—É—á–Ω–æ–µ —á–µ—Ä–µ–∑ curl/UI)

## 6. –ú–µ—Ç—Ä–∏—á–µ—Å–∫–æ–µ –≤–ª–∏—è–Ω–∏–µ
üîµ ‚Äî –†–æ—Å—Ç –Ω–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º —á–µ—Ä–µ–∑ —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ TTL –∏ –≤—ã–±–æ—Ä–∫—É —Ç–æ–ª—å–∫–æ –±–ª–∏–∂–∞–π—à–∏—Ö –º–∞—Ç—á–µ–π; –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã designed –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è.
