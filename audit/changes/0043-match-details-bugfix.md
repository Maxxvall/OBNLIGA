# Исправление: Белый экран после добавления страницы деталей матча

**Дата:** 2025-10-17  
**Связано:** code-audit-0043.md

## Проблема
После реализации страницы деталей матча (`/matches/:id`) приложение показывало белый экран при открытии `http://localhost:5173/`.

## Причина
В директории `shared/` присутствовали скомпилированные `.js` файлы в CommonJS формате:
- `shared/types.js`
- `shared/utils/wordForms.js`

Vite (ESM-сборщик) пытался импортировать `.js` вместо исходных `.ts` файлов, что приводило к ошибке:
```
The requested module '/@fs/C:/Users/user/Desktop/OBNLIGA/shared/utils/wordForms.js' 
does not provide an export named 'formatPlayersCount'
```

CommonJS экспорты (`exports.formatPlayersCount`) несовместимы с ESM импортами (`import { formatPlayersCount }`).

## Решение
Удалены все скомпилированные `.js` файлы из `shared/`:
```powershell
Remove-Item shared/*.js
Remove-Item shared/utils/*.js
```

Теперь Vite корректно импортирует исходные TypeScript файлы через настроенный alias:
```typescript
// vite.config.ts
resolve: {
  alias: {
    '@shared': path.resolve(__dirname, '../shared'),
  },
}
```

## Проверка
✅ Приложение загружается без ошибок  
✅ Консоль браузера чистая (нет ошибок импорта)  
✅ Навигация работает корректно:
  - Главная → Лига → Результаты → Детали матча
  - Кнопка "Назад" возвращает на главную
  - Вкладки (Составы/События/Статистика/Трансляция) переключаются
✅ ESLint пройден (исправлены escape апострофов и отступы)

## Бизнес-логика
**Не нарушена.** Изменения касались только build-артефактов. Функциональность приложения осталась полной:
- Публичный API match details работает
- Lazy loading и polling реализованы
- Кэширование с TTL сохранено
- Навигация из расписания/результатов функционирует

## Рекомендации
- Добавить `.gitignore` правила для `shared/*.js`, чтобы исключить случайный коммит скомпилированных файлов.
- При работе с shared-слоем использовать только TypeScript файлы для фронтенда.
- Backend может компилировать shared в CJS при необходимости (если использует require).
