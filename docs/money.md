# DeepWiki Q&A with Code Context for Repository: Maxxvall/OBNLIGA
## Q1
—Ö–æ—á—É –¥–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏ Telegram Stars, ## –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –ø–æ–¥–ø–∏—Å–∫–∏

### üå± **ROOKIE** (–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π)
–ë–∞–∑–æ–≤—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### üî• **FAN** (–°—Ä–µ–¥–Ω–∏–π) ‚Äî ~49-99‚≠ê/–º–µ—Å—è—Ü
–î–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–æ–ª–µ–ª—å—â–∏–∫–æ–≤.

### üèÜ **LEGEND** (–ü—Ä–µ–º–∏—É–º) ‚Äî ~199-299‚≠ê/–º–µ—Å—è—Ü
–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º.


—á—Ç–æ –º–Ω–µ –ª—É—á—à–µ –≤—Å–µ–≥–æ –≤ –Ω–∏—Ö –≤–∫–ª—é—á–∏—Ç—å –∏ –∫–∞–∫ —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å? —Å–æ—Å—Ç–∞–≤—å —á–µ—Ç–∫–∏–π –ø–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è
### Answer
# –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram Stars

–ò–∑—É—á–∏–≤ –≤–∞—à—É –∫–æ–¥–æ–≤—É—é –±–∞–∑—É, –≤–æ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π –∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥–ø–∏—Å–æ–∫:

## üìä –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –ø–æ —É—Ä–æ–≤–Ω—è–º

### üå± **ROOKIE** (–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π)
**–ë–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–∞—Ç—á–µ–π
- ‚úÖ –ü—Ä–æ–≥–Ω–æ–∑—ã: **5 –ø—Ä–æ–≥–Ω–æ–∑–æ–≤/–Ω–µ–¥–µ–ª—è** (—Ç–µ–∫—É—â–∏–π –ª–∏–º–∏—Ç 10) OBNLIGA:9-9 
- ‚úÖ –≠–∫—Å–ø—Ä–µ—Å—Å-—Å—Ç–∞–≤–∫–∏: **1 —ç–∫—Å–ø—Ä–µ—Å—Å/6 –¥–Ω–µ–π, –º–∞–∫—Å. 2 —Å–æ–±—ã—Ç–∏—è** (—Ç–µ–∫—É—â–∏–π –ª–∏–º–∏—Ç 2 —ç–∫—Å–ø—Ä–µ—Å—Å–∞ –ø–æ 4 —Å–æ–±—ã—Ç–∏—è) OBNLIGA:40-45 
- ‚úÖ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã: **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ—á–∫–∏** (1-30) OBNLIGA:24-32 
- ‚úÖ –†–µ–π—Ç–∏–Ω–≥–∏: —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–µ–≥–æ —Å–µ–∑–æ–Ω–∞
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∏: **2 –∫–æ–º–∞–Ω–¥—ã –º–∞–∫—Å–∏–º—É–º**
- ‚úÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è: –±–∞–∑–æ–≤—ã–µ —É—Ä–æ–≤–Ω–∏
- ‚ùå –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∞–≥–∞–∑–∏–Ω—É

### üî• **FAN** (49-99‚≠ê/–º–µ—Å—è—Ü)
**–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ü—Ä–æ–≥–Ω–æ–∑—ã: **15 –ø—Ä–æ–≥–Ω–æ–∑–æ–≤/–Ω–µ–¥–µ–ª—è** (+150% –∫ –±–∞–∑–æ–≤–æ–º—É)
- ‚úÖ –≠–∫—Å–ø—Ä–µ—Å—Å-—Å—Ç–∞–≤–∫–∏: **3 —ç–∫—Å–ø—Ä–µ—Å—Å–∞/6 –¥–Ω–µ–π, –º–∞–∫—Å. 4 —Å–æ–±—ã—Ç–∏—è** (+200% —ç–∫—Å–ø—Ä–µ—Å—Å–æ–≤)
- ‚úÖ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã: **–±–æ–Ω—É—Å +50%** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–µ–Ω—å 7 –¥–∞—ë—Ç 45 –æ—á–∫–æ–≤ –≤–º–µ—Å—Ç–æ 30)
- ‚úÖ –†–µ–π—Ç–∏–Ω–≥–∏: –¥–æ—Å—Ç—É–ø –∫ –≥–æ–¥–æ–≤–æ–º—É —Ä–µ–π—Ç–∏–Ω–≥—É OBNLIGA:884-887 
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∏: **10 –∫–æ–º–∞–Ω–¥** + –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∑–∞ 60 –º–∏–Ω—É—Ç OBNLIGA:83-84 
- ‚úÖ –ú–∞–≥–∞–∑–∏–Ω: **—Å–∫–∏–¥–∫–∞ 10%** –Ω–∞ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã
- ‚úÖ –ó–Ω–∞—á–æ–∫ üî• –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ (–Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100) OBNLIGA:414-420 

### üèÜ **LEGEND** (199-299‚≠ê/–º–µ—Å—è—Ü)
**–ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø:**
- ‚úÖ –ü—Ä–æ–≥–Ω–æ–∑—ã: **–Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ** (–±–µ–∑ –Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞)
- ‚úÖ –≠–∫—Å–ø—Ä–µ—Å—Å-—Å—Ç–∞–≤–∫–∏: **5 —ç–∫—Å–ø—Ä–µ—Å—Å–æ–≤/6 –¥–Ω–µ–π, –º–∞–∫—Å. 6 —Å–æ–±—ã—Ç–∏–π**
- ‚úÖ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã: **–±–æ–Ω—É—Å +100%** (–¥–µ–Ω—å 7 = 60 –æ—á–∫–æ–≤)
- ‚úÖ –†–µ–π—Ç–∏–Ω–≥–∏: —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º —Å–Ω–∏–º–∫–∞–º OBNLIGA:565-577 
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∏: **–Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥** + —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∑–∞ 1440 –º–∏–Ω—É—Ç (24 —á–∞—Å–∞)
- ‚úÖ –ú–∞–≥–∞–∑–∏–Ω: **—Å–∫–∏–¥–∫–∞ 20%** + —Ä–∞–Ω–Ω–∏–π –¥–æ—Å—Ç—É–ø –∫ –Ω–æ–≤—ã–º —Ç–æ–≤–∞—Ä–∞–º
- ‚úÖ –ó–Ω–∞—á–æ–∫ üèÜ –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ
- ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ –≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- ‚úÖ –î–æ—Å—Ç—É–ø –∫ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–µ –º–∞—Ç—á–µ–π
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–æ–≥–Ω–æ–∑—ã OBNLIGA:500-517 

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### **–≠—Ç–∞–ø 1: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (1-2 –¥–Ω—è)**

–î–æ–±–∞–≤–∏—Ç—å –≤ `prisma/schema.prisma`: OBNLIGA:123-159 

```prisma
enum SubscriptionTier {
  ROOKIE
  FAN
  LEGEND
}

model UserSubscription {
  id                BigInt           @id @default(autoincrement())
  userId            Int              @map("user_id")
  tier              SubscriptionTier @default(ROOKIE)
  starsPaid         Int              @default(0) @map("stars_paid")
  telegramPaymentId String?          @unique @map("telegram_payment_id")
  startDate         DateTime         @default(now()) @map("start_date")
  endDate           DateTime         @map("end_date")
  isActive          Boolean          @default(true) @map("is_active")
  autoRenew         Boolean          @default(false) @map("auto_renew")
  createdAt         DateTime         @default(now()) @map("created_at")
  updatedAt         DateTime         @updatedAt @map("updated_at")
  
  appUser AppUser @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@index([userId, isActive], map: "user_subscription_user_active_idx")
  @@index([endDate], map: "user_subscription_end_date_idx")
  @@map("user_subscription")
}

model SubscriptionHistory {
  id          BigInt           @id @default(autoincrement())
  userId      Int              @map("user_id")
  tier        SubscriptionTier
  action      String           // 'purchased', 'renewed', 'cancelled', 'expired'
  starsPaid   Int?             @map("stars_paid")
  metadata    Json?
  createdAt   DateTime         @default(now()) @map("created_at")
  
  @@index([userId, createdAt], map: "subscription_history_user_date_idx")
  @@map("subscription_history")
}
```

–û–±–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª—å `AppUser`: OBNLIGA:123-159 

```prisma
model AppUser {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...
  currentTier         SubscriptionTier  @default(ROOKIE) @map("current_tier")
  subscriptions       UserSubscription[]
}
```

### **–≠—Ç–∞–ø 2: –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π –ø–æ–¥–ø–∏—Å–æ–∫ (2-3 –¥–Ω—è)**

–°–æ–∑–¥–∞—Ç—å `backend/src/services/subscriptionService.ts`:

```typescript
// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–∏–º–∏—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ tier
export const getPredictionLimit = (tier: SubscriptionTier): number | null
export const getExpressLimit = (tier: SubscriptionTier): number
export const getExpressMaxItems = (tier: SubscriptionTier): number
export const getDailyRewardMultiplier = (tier: SubscriptionTier): number
export const getClubSubscriptionLimit = (tier: SubscriptionTier): number | null
export const getShopDiscount = (tier: SubscriptionTier): number
export const canAccessHistoricalRatings = (tier: SubscriptionTier): boolean
```

–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã: OBNLIGA:9-9 

```typescript
// –í–º–µ—Å—Ç–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Å–¥–µ–ª–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é
export const getPredictionWeeklyLimit = (tier: SubscriptionTier): number | null
```

### **–≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Telegram Stars API (3-4 –¥–Ω—è)**

–°–æ–∑–¥–∞—Ç—å `backend/src/services/telegramPaymentService.ts`:

```typescript
// –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Payments API
export const createInvoice = async (userId: number, tier: SubscriptionTier)
export const handleSuccessfulPayment = async (paymentData: TelegramPaymentInfo)
export const verifyPayment = async (telegramPaymentId: string)
export const cancelSubscription = async (userId: number)
export const checkSubscriptionStatus = async (userId: number)
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Grammy –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π: OBNLIGA:38-38 

```typescript
bot.on('pre_checkout_query', handlePreCheckout)
bot.on('message:successful_payment', handleSuccessfulPayment)
```

### **–≠—Ç–∞–ø 4: Middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏ (1-2 –¥–Ω—è)**

–°–æ–∑–¥–∞—Ç—å `backend/src/utils/subscriptionMiddleware.ts`:

```typescript
export const requireTier = (minTier: SubscriptionTier) => {
  return async (request, reply) => {
    const user = await getUserWithSubscription(request)
    if (user.currentTier < minTier) {
      return reply.status(403).send({ 
        ok: false, 
        error: 'subscription_required',
        requiredTier: minTier,
        currentTier: user.currentTier
      })
    }
  }
}
```

### **–≠—Ç–∞–ø 5: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (3-5 –¥–Ω–µ–π)**

**–ü—Ä–æ–≥–Ω–æ–∑—ã:** OBNLIGA:530-543 

```typescript
// –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ª–∏–º–∏—Ç–∞
const userTier = await getUserTier(user.id)
const weeklyLimit = getPredictionWeeklyLimit(userTier)
if (weeklyLimit !== null && weeklyCount >= weeklyLimit) {
  return reply.status(429).send({ 
    ok: false, 
    error: 'weekly_limit_reached',
    upgradeRequired: true
  })
}
```

**–≠–∫—Å–ø—Ä–µ—Å—Å-—Å—Ç–∞–≤–∫–∏:** OBNLIGA:120-132 

```typescript
// –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ª–∏–º–∏—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ tier
const userTier = await getUserTier(user.id)
const expressLimit = getExpressLimit(userTier)
const maxItems = getExpressMaxItems(userTier)
```

**–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã:** OBNLIGA:331-331 

```typescript
// –ü—Ä–∏–º–µ–Ω—è—Ç—å –º–Ω–æ–∂–∏—Ç–µ–ª—å
const multiplier = await getDailyRewardMultiplier(userId)
const finalPoints = reward.points * multiplier
await createPointAdjustments(tx, userId, finalPoints, nextDay)
```

**–ú–∞–≥–∞–∑–∏–Ω:** OBNLIGA:1-10 

```typescript
// –ü—Ä–∏–º–µ–Ω—è—Ç—å —Å–∫–∏–¥–∫—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
const discount = await getShopDiscount(user.id)
const discountedTotal = Math.round(totalCents * (1 - discount))
```

**–ü–æ–¥–ø–∏—Å–∫–∏:** OBNLIGA:192-211 

```typescript
// –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ª–∏–º–∏—Ç –∫–æ–º–∞–Ω–¥
const currentCount = await prisma.clubSubscription.count({ where: { userId } })
const limit = getClubSubscriptionLimit(userTier)
if (limit !== null && currentCount >= limit) {
  return reply.status(403).send({ 
    ok: false, 
    error: 'subscription_limit_reached' 
  })
}
```

### **–≠—Ç–∞–ø 6: Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (3-4 –¥–Ω—è)**

–°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `SubscriptionCard.tsx` - –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏
- `SubscriptionModal.tsx` - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞
- `SubscriptionBadge.tsx` - –∑–Ω–∞—á–æ–∫ tier –≤ UI
- `UpgradePrompt.tsx` - –ø—Ä–∏–∑—ã–≤ –∫ –∞–ø–≥—Ä–µ–π–¥—É –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞

–î–æ–±–∞–≤–∏—Ç—å –≤ store: OBNLIGA:1-10 

```typescript
interface AppState {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...
  userTier: SubscriptionTier
  subscriptionLimits: SubscriptionLimits
}
```

### **–≠—Ç–∞–ø 7: –†–æ—É—Ç—ã –ø–æ–¥–ø–∏—Å–æ–∫ (2 –¥–Ω—è)**

–°–æ–∑–¥–∞—Ç—å `backend/src/routes/subscriptionPaymentRoutes.ts`:

```typescript
POST   /api/subscriptions/create-invoice  // –°–æ–∑–¥–∞—Ç—å –∏–Ω–≤–æ–π—Å
GET    /api/subscriptions/my              // –¢–µ–∫—É—â–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
POST   /api/subscriptions/cancel          // –û—Ç–º–µ–Ω–∏—Ç—å –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ
GET    /api/subscriptions/history         // –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
GET    /api/subscriptions/limits          // –¢–µ–∫—É—â–∏–µ –ª–∏–º–∏—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### **–≠—Ç–∞–ø 8: Cron –∑–∞–¥–∞—á–∏ (1-2 –¥–Ω—è)**

–î–æ–±–∞–≤–∏—Ç—å –≤ `backend/src/routes/cronRoutes.ts`: OBNLIGA:97-97 

```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö –ø–æ–¥–ø–∏—Å–æ–∫ –∫–∞–∂–¥—ã–π —á–∞—Å
POST /api/cron/check-expired-subscriptions
// –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–∫–æ—Ä–æ–º –∏—Å—Ç–µ—á–µ–Ω–∏–∏ (–∑–∞ 3 –¥–Ω—è)
POST /api/cron/send-renewal-reminders
```

### **–≠—Ç–∞–ø 9: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (3-5 –¥–Ω–µ–π)**

1. **Unit —Ç–µ—Å—Ç—ã** –¥–ª—è —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
2. **Integration —Ç–µ—Å—Ç—ã** –¥–ª—è payment flow
3. **E2E —Ç–µ—Å—Ç—ã** —Å Telegram Test Environment
4. **Load —Ç–µ—Å—Ç—ã** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
5. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π, –∑–∞—â–∏—Ç–∞ –æ—Ç –Ω–∞–∫—Ä—É—Ç–∫–∏

## üìà –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é

### –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞:
- **FAN**: **69‚≠ê/–º–µ—Å—è—Ü** (~$0.99 USD)
- **LEGEND**: **249‚≠ê/–º–µ—Å—è—Ü** (~$3.49 USD)

### –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:
- **–ü–µ—Ä–≤—ã–π –º–µ—Å—è—Ü -30%** –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
- **–ì–æ–¥–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ -20%** (FAN: 690‚≠ê/–≥–æ–¥, LEGEND: 2490‚≠ê/–≥–æ–¥)
- **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞**: –ø—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞ ‚Üí +7 –¥–Ω–µ–π –ø–æ–¥–ø–∏—Å–∫–∏

## üéØ –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

–î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É:
1. **Conversion rate**: ROOKIE ‚Üí FAN ‚Üí LEGEND
2. **Churn rate**: –æ—Ç—Ç–æ–∫ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
3. **ARPU** (Average Revenue Per User)
4. **Feature usage**: –∫–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–ª–∞—Ç–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
5. **Upgrade triggers**: —á—Ç–æ –º–æ—Ç–∏–≤–∏—Ä—É–µ—Ç –∞–ø–≥—Ä–µ–π–¥ (–ª–∏–º–∏—Ç—ã, —Ñ—É–Ω–∫—Ü–∏–∏)

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤**: –¢–µ–∫—É—â–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã —Ä–µ–∑–∫–æ –ø–æ—Ç–µ—Ä—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ grace period 30 –¥–Ω–µ–π.

2. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å**: –ß–µ—Ç–∫–æ –ø–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –ª–∏–º–∏—Ç—ã –∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∫–∞–∂–¥–æ–≥–æ tier.

3. **Telegram Guidelines**: –°–ª–µ–¥—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞–º Telegram Stars API –∏ –ø–æ–ª–∏—Ç–∏–∫–µ –ø–ª–∞—Ç–µ–∂–µ–π.

4. **–†–µ–≤–µ—Ä—Å–∏–≤–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è ROOKIE —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–ª–∞—Ç–µ–∂–µ–π**: –õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å–ø–æ—Ä–æ–≤.

## üìÖ –û–±—â–∞—è timeline: 20-30 –¥–Ω–µ–π

- **–ù–µ–¥–µ–ª—è 1**: –≠—Ç–∞–ø—ã 1-2 (–ë–î + —Å–µ—Ä–≤–∏—Å—ã)
- **–ù–µ–¥–µ–ª—è 2**: –≠—Ç–∞–ø—ã 3-5 (Telegram API + middleware + –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)
- **–ù–µ–¥–µ–ª—è 3**: –≠—Ç–∞–ø—ã 6-7 (Frontend + —Ä–æ—É—Ç—ã)
- **–ù–µ–¥–µ–ª—è 4**: –≠—Ç–∞–ø—ã 8-9 (Cron + —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

## Notes

–í–∞—à –ø—Ä–æ–µ–∫—Ç —É–∂–µ –∏–º–µ–µ—Ç –æ—Ç–ª–∏—á–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å —Å–∏—Å—Ç–µ–º–æ–π –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è, –æ—á–µ—Ä–µ–¥—è–º–∏ –∑–∞–¥–∞—á –∏ WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫ –æ—Ä–≥–∞–Ω–∏—á–Ω–æ –≤–ø–∏—à–µ—Ç—Å—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É. –û—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ —É–¥–µ–ª–∏—Ç–µ:

- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ tier –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ –ë–î
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π** –¥–ª—è –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–æ–∫
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏

Telegram Stars API —Ö–æ—Ä–æ—à–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å Grammy, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ.