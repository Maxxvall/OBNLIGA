# audit/code-audit-friendlies

**–î–∞—Ç–∞:** 2025-11-02  
**–ó–∞–¥–∞—á–∞:** –¢–æ–≤–∞—Ä–∏—â–µ—Å–∫–∏–µ –º–∞—Ç—á–∏: –≤—ã–±–æ—Ä –∫–æ–º–∞–Ω–¥ –∏–∑ –ë–î, –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –º–∞—Ç—á–µ–π, –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** VSCode Agent v1.1

## 1. –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- "friendly" –≤ admin/src
- "FriendlyMatch" –≤ prisma/schema.prisma
- "handleMatchFinalization" –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- "ensureMatchForJudge"
- "match_statistics" —Ä—É—á–∫–∏

## 2. –ü—Ä–æ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—É—Ç–∏
- admin/src/components/tabs/MatchesTab.tsx
- admin/src/store/adminStore.ts
- backend/src/routes/adminRoutes.ts
- backend/src/routes/assistantRoutes.ts
- backend/src/routes/judgeRoutes.ts
- backend/src/services/matchAggregation.ts
- prisma/schema.prisma
- docs/state.md

## 3. –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
- admin –ø–∞–Ω–µ–ª—å —É–∂–µ —Å–æ–∑–¥–∞—ë—Ç —Ç–æ–≤–∞—Ä–∏—â–µ—Å–∫–∏–µ –º–∞—Ç—á–∏, –Ω–æ –≤–≤–æ–¥–∏—Ç –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫–æ–π.
- backend/adminRoutes.ts —Ö—Ä–∞–Ω–∏—Ç friendly_match –∑–∞–ø–∏—Å–∏ –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –∫–ª—É–±–∞–º –∏ –±–µ–∑ –ª–æ–≥–∏–∫–∏ lineups/events.
- handleMatchFinalization –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ Match.
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞–Ω–µ–ª–∏ –ø–æ–º–æ—â–Ω–∏–∫–∞/—Å—É–¥—å–∏ –æ–ø–µ—Ä–∏—Ä—É—é—Ç —Ç–æ–ª—å–∫–æ Match.

## 4. –†–µ—à–µ–Ω–∏–µ
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä–∏—â–µ—Å–∫–∏–µ –º–∞—Ç—á–∏ —á–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–Ω—É—é —Å—É—â–Ω–æ—Å—Ç—å Match —Å –¥–æ–ø. –∞—Ç—Ä–∏–±—É—Ç–æ–º isFriendly. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ admin –ø–∞–Ω–µ–ª—å —Å –≤—ã–±–æ—Ä–æ–º –∫–ª—É–±–æ–≤. –û–±–µ—Å–ø–µ—á–∏—Ç—å –ø–æ–ª–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Ä—É—á–∫–∞–º–∏ –¥–ª—è lineup/events/assistant/judge. –ò—Å–∫–ª—é—á–∏—Ç—å —Ç–∞–∫–∏–µ –º–∞—Ç—á–∏ –∏–∑ –∞–≥—Ä–µ–≥–∏—Ä—É—é—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ —Ç–∞–±–ª–∏—Ü.

## 5. –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- [ ] –ò–∑–º–µ–Ω–∏—Ç—å prisma schema: –¥–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ isFriendly –≤ Match (–∏ —Å–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏).
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã; –æ–±–Ω–æ–≤–∏—Ç—å docs/BD.md.
- [ ] –û–±–Ω–æ–≤–∏—Ç—å backend admin POST /friendly-matches -> —Å–æ–∑–¥–∞–≤–∞—Ç—å Match —Å —Ñ–ª–∞–≥–æ–º isFriendly, –ø–µ—Ä–µ–Ω–æ—Å –≤ –æ–±—â–∏–µ —Ä—É—á–∫–∏.
- [ ] –û–±–Ω–æ–≤–∏—Ç—å admin UI —Ñ–æ—Ä–º—É: –≤—ã–±–æ—Ä –∫–ª—É–±–æ–≤ –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞, –æ—Ç–ø—Ä–∞–≤–∫–∞ IDs.
- [ ] –ò—Å–∫–ª—é—á–∏—Ç—å isFriendly –∏–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫/—Ç–∞–±–ª–∏—Ü (rebuildClubSeasonStats –∏ –¥—Ä.).
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞/—Å—É–¥—å—é: –≤–∫–ª—é—á–∏—Ç—å —Ç–æ–≤–∞—Ä–∏—â–µ—Å–∫–∏–µ –º–∞—Ç—á–∏ –≤ –≤—ã–±–æ—Ä–∫—É –∏ —Ä—É—á–∫–∏, –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é —ç–Ω–¥–ø–æ–π–Ω—Ç—ã.
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ docs/state.md –∏ –ø—Ä–æ—á–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä/–±–∏–ª–¥.

## 6. –ú–µ—Ç—Ä–∏—á–µ—Å–∫–æ–µ –≤–ª–∏—è–Ω–∏–µ
üîµ ‚Äî –ª–æ–≥–∏–∫–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏, –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–ª–∞–≥ –∏ —Ñ–∏–ª—å—Ç—Ä—ã).
